
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Em Dia com as Escrituras</title>
  <meta name="description" content="Arquivo √∫nico com di√°rio b√≠blico, plano cronol√≥gico e links r√°pidos para abrir a B√≠blia online." />
  <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFCElEQVR4nO2bbUxTVxjHn/vS0tt3xAGKgcEiszD5oGwONiILiaJORBbGTLYPyhqNA7aY8GEuS0iMRuYyRlzcHGFqcHNKDJMRnQ4TpcG4TWVj0yqIDCqIMKG2vX257b13H5Y2bWmL7Yyntvf37dxzzr3/53+ec85teg8mXf8qDyGgO3WaUPXRjqysSB+qngxW4Q58rhtEO3PFgQXKALpTp3naA/cnWEw+BsTKqAcjUHy4f6NYDR4gcGweA2Ix7QMhKyvSey/sOED8BO/G24RZUyDewHieXxJPo+8N3anTxH0GCAagFoAawQDUAlAjGIBaAGoEA1ALQI1gAGoBqBEMQC0ANYIBqAWgRjAAtQDUBP1jxJ/sRRmuvgNHp+Zqx3IcKMtXLgjVz8Wy4HA6MaPFjI9OTRDXbt8UHT1/huq/MygKdt/CnDxm2+tv0CuWvOBMVidyLMeB2UpjD0wP8aF7Y+TA3RHy4yNfKR41HjePbMDjhCQIIAmCl0kkbNr8Z9gCzVLmvfWVdLvuPFWzv1Flsdsw7/Y1ZW/Se6trTBjmcxkocQKfrJ7HadIzXeyLhfBEDWj96ZS07sCnqkj7ySUUn5OR5dq2roKuKl5lAwCoLCqxZaYsdK3eWZNkZxgMACArNY3dvXm7J/gvu07KmjuOySaN03h6cipbXlhsryuvolUyBRdJHMjWAIvdhv1667poy2e71HuOHZK7r+dna5wN72w1u8vrVrxiJwkCAACMFjNe39KsNEzdJxxOJzY4ZiD3tbfJc7VVyccvnKMi0REVi+De44cVwxPjhLusXVNuTVQoOQCAlMQkn5ElccK/O5isNKb9fLc6kmdHhQEsx8GpSxcl7rJELOaL85YxAACGqfueiNVyBff9R3umCzRLGXdW/F8iXgOqSzdYq0s3WP2vH/m5S7p9f2PYa4PeMOyzA2QvynABAJy7ejnBzjCYRCzmAQBK8wscpfkFDjvDYP3Dg+Sl6/3idl039fvQQNAdJBRRkQEAALTfyq+kZBwAwPDEOFHf0qxkOd81TiIW8y89n+v8oGIT3dvU+s/h+gajmBSF/NgjEE98FwiGnJL6RPjQavEMzjdnO6W9N/4Qb11bQa9a/rIjM3Uh69+/sqjENjRuIHZ92xrWVojkPSAQOemZLu/ywN0RH223DCPkjoNNKgCAZPU8rjhvmUO7dqO1MCePcbfZWPiaPVwDomIKEDgOZQUr7e6ynWGwi3/2iYO1nzRO4yd6uqnSnbVJg2MGj1FJSlXY7wJRYcCHb202P5uywJPWLWd+kM6YTTgAwNsla2xbVpdZcWy2VJbjYNI47amYmHkQ9taAbArIJBI+N+M5nzdBAIArA3pRQ9tBTxqrZQqu8d1aU115Ff316Q5pd99vCaOT9wiZhOI3Fa+2eU+Brl90CeHqeOzbIABA0Q7t/Gu3bwbclkL1O9HTTdV+8YnK/RrszeK0dNc+7fumYHquDOhFTSe/kwerDwaSDOB4DuwMg82Y//s1eHVQL2rrPk399ffQLNM6L/dIOJ6D5Ys1ztyMLFeSUsWp5QpOTIp4o8WM3xi9Q3b0XqAOnf1R6mRdgR4XEuEDCdQiUCMYgFoAagQDUAtAjWAAagGoEQxALQA1ggGoBaBGMAC1ANQIBvgfIYkX3KdkhAwAmH2QKNbxPiPlyYB4McH/gNisKRDLJgSKTTg6G+z0eKwco43o8HSgGzytzDWA/wJT4BQdFWdbIQAAAABJRU5ErkJggg==" sizes="64x64" />
  <meta name="theme-color" content="#0a4d3c" />
  <style>
* { box-sizing: border-box; }
:root { --bg:#f6f8f7; --card:#ffffff; --text:#203029; --muted:#70887e; --primary:#0a4d3c; --primary-2:#0f7a60; --danger:#9a1a1a; --shadow:0 8px 24px rgba(0,0,0,.08); }
html, body { margin:0; padding:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial; background:var(--bg); color:var(--text); }
.topbar { position:sticky; top:0; z-index:50; display:flex; align-items:center; justify-content:space-between; padding:8px 16px; background:var(--card); box-shadow:var(--shadow); }
.brand { display:flex; align-items:center; gap:10px; }
.brand .logo { width:36px; height:36px; border-radius:8px; }
.user-actions { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
button { padding:10px 14px; border-radius:10px; border:1px solid transparent; cursor:pointer; font-weight:600; }
button.primary { background:var(--primary); color:#fff; }
button.primary:hover { background:var(--primary-2); }
button.ghost { background:transparent; border-color:#cfd9d4; color:var(--text); }
button.danger { background:transparent; color:var(--danger); border-color:#e5bcbc; }
.linklike { cursor:pointer; }
.container { max-width:1000px; margin:20px auto; padding:0 16px; }
.hidden { display:none; }
.card { background:var(--card); padding:16px; border-radius:14px; box-shadow:var(--shadow); margin-bottom:16px; }
.row { display:flex; gap:12px; }
.between { justify-content:space-between; }
.center { align-items:center; }
.grid2 { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:720px){ .grid2 { grid-template-columns:1fr; } }
label { display:block; font-size:14px; color:var(--muted); margin-bottom:6px; }
input, select, textarea { width:100%; padding:10px 12px; border-radius:10px; border:1px solid #cfd9d4; background:#fff; font-size:16px; }
input:focus, select:focus, textarea:focus { outline:2px solid #b0e0d0; border-color:#b0e0d0; }
.actions { margin-top:10px; display:flex; gap:10px; flex-wrap:wrap; }
.list { margin-top:12px; border-top:1px dashed #d9e3de; padding-top:12px; }
.entry { background:#f9fbfa; border:1px solid #dce7e2; border-radius:10px; padding:10px; margin-bottom:8px; }
.entry small { color:var(--muted); }
.centerbox { min-height:70vh; display:flex; align-items:center; justify-content:center; }
.login-card { background:var(--card); padding:24px; border-radius:16px; box-shadow:var(--shadow); width:100%; max-width:360px; text-align:center; }
.login-card img { width:72px; height:72px; border-radius:14px; }
.footer { text-align:center; color:var(--muted); padding:24px; }
.tips { background:#f2f7f5; border:1px dashed #c9ded6; border-radius:10px; padding:10px; }
.datebox input { padding:8px 10px; }
#streakBadge { background:#fff6e5; color:#a25d00; padding:6px 10px; border-radius:999px; border:1px solid #ffd9a2; font-weight:700; }
#bibleLinks { display:flex; gap:8px; flex-wrap:wrap; }
#customBibleUrl { width:320px; max-width:100%; }
</style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="data:image/png;base64,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" alt="√çcone" class="logo" />
      <h1>Em Dia com as Escrituras</h1>
    </div>
    <div class="user-actions">
      <span id="streakBadge" title="Dias seguidos">üî• 0</span>
      <button id="exportBtn" class="ghost"></button>
      <label for="importFile" class="ghost linklike">Importar</label>
      <input type="file" id="importFile" accept="application/json" hidden />
      <button id="shareLinkBtn" class="primary"></button>
      <button id="logoutBtn" class="danger">Rr</button>
    </div>
  </header>

  <main id="app" class="container hidden">
    <section class="card">
      <div class="row between center">
        <h2>Hoje</h2>
        <div class="datebox">
          <input type="date" id="entryDate" />
        </div>
      </div>
      <div class="grid2">
        <div>
          <label for="bookSelect">Livro</label>
          <select id="bookSelect"></select>
        </div>
        <div>
          <label for="chaptersInput">Cap√≠tulo(s)</label>
          <input id="chaptersInput" placeholder="ex: 3, 3-4, 1,3,5-7" />
        </div>
      </div>
      <div>
        <label for="reflectionInput">Reflex√£o do dia (sobre a leitura)</label>
        <textarea id="reflectionInput" rows="4" placeholder="O que Deus me ensinou hoje? Como posso aplicar?"></textarea>
      </div>
      <div>
        <label for="devotionalInput">Devocional do dia</label>
        <textarea id="devotionalInput" rows="3" placeholder="Anote uma ora√ß√£o, um prop√≥sito ou um vers√≠culo para memorizar."></textarea>
      </div>
      <div class="actions">
        <button id="saveEntryBtn" class="primary">Salvar dia</button>
        <button id="loadTodayPlanBtn" class="ghost">Carregar plano de hoje</button>
        <button id="clearTodayBtn" class="ghost">Limpar do dia</button>
      </div>

      <div class="tips" style="margin-top:12px">
        <strong>Abrir a B√≠blia online</strong>
        <div id="bibleLinks">
          <button id="openYouVersion" class="ghost">Abrir no YouVersion</button>
          <button id="openBibleGateway" class="ghost">Abrir no BibleGateway</button>
          <input id="customBibleUrl" placeholder="Cole aqui seu link preferido (ex.: app, site, tradu√ß√£o espec√≠fica)" />
          <button id="openCustomBible" class="ghost">Abrir link personalizado</button>
        </div>
        <small style="color:#70887e">Dica: voc√™ pode colar aqui um link direto para o cap√≠tulo do dia na sua tradu√ß√£o favorita.</small>
      </div>

      <div id="todayList" class="list"></div>
    </section>

    <section class="card">
      <h2>Reflex√µes por Livro</h2>
      <div class="grid2">
        <div>
          <label for="bookNotesSelect">Livro</label>
          <select id="bookNotesSelect"></select>
        </div>
        <div class="tips">
          <strong>Sugest√µes de reflex√£o</strong>
          <ul id="promptList"></ul>
        </div>
      </div>
      <textarea id="bookNotes" rows="6" placeholder="Escreva aqui um resumo e aprendizados deste livro."></textarea>
      <div class="actions">
        <button id="saveBookNotesBtn" class="primary">Salvar Reflex√µes do Livro</button>
      </div>
    </section>

    <section class="card">
      <div class="row between center">
        <h2>Plano de Leitura</h2>
        <div class="row center" style="gap:8px">
          <label for="planStart">In√≠cio</label>
          <input type="date" id="planStart" />
          <label for="planRate">Cap√≠tulos/dia</label>
          <input type="number" id="planRate" min="1" max="10" value="3" style="width:90px"/>
          <button id="generatePlanBtn" class="ghost">Gerar/Regerar</button>
        </div>
      </div>
      <p style="color:#70887e">Modo: <strong>Cronol√≥gico</strong> (ordem hist√≥rica simplificada). Marque como conclu√≠do e, se quiser, envie o trecho do dia para "Hoje".</p>
      <div id="planList" class="list"></div>
      <div class="actions">
        <button id="clearPlanBtn" class="danger">Excluir plano</button>
      </div>
    </section>

    <section class="card">
      <h2>Hist√≥rico</h2>
      <div id="history"></div>
    </section>
  </main>

  <section id="login" class="centerbox">
    <div class="login-card">
      <img src="data:image/png;base64,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" alt="√çcone" />
      <h2>Bem-vindo!</h2>
      <p>Entre com seu nome para come√ßar e manter seu progresso salvo neste dispositivo.</p>
      <input id="nameInput" placeholder="Seu nome" />
      <button id="loginBtn" class="primary">Entrar</button>
    </div>
  </section>

  <footer class="footer">
    <p>Feito com ‚ù§ para te ajudar a ficar <em>Em Dia com as Escrituras</em>. Arquivo √∫nico, simples e funcional.</p>
  </footer>

  <script>
window.BIBLE_BOOKS = [
  'G√™nesis','√äxodo','Lev√≠tico','N√∫meros','Deuteron√¥mio','Josu√©','Ju√≠zes','Rute','1 Samuel','2 Samuel','1 Reis','2 Reis','1 Cr√¥nicas','2 Cr√¥nicas','Esdras','Neemias','Ester','J√≥','Salmos','Prov√©rbios','Eclesiastes','C√¢nticos','Isa√≠as','Jeremias','Lamenta√ß√µes','Ezequiel','Daniel','Os√©ias','Joel','Am√≥s','Obadias','Jonas','Miqu√©ias','Naum','Habacuque','Sofonias','Ageu','Zacarias','Malaquias',
  'Mateus','Marcos','Lucas','Jo√£o','Atos','Romanos','1 Cor√≠ntios','2 Cor√≠ntios','G√°latas','Ef√©sios','Filipenses','Colossenses','1 Tessalonicenses','2 Tessalonicenses','1 Tim√≥teo','2 Tim√≥teo','Tito','Filemom','Hebreus','Tiago','1 Pedro','2 Pedro','1 Jo√£o','2 Jo√£o','3 Jo√£o','Judas','Apocalipse'
];
</script>
  <script>
const CHRONO_SEGMENTS = [
  ['G√™nesis',1,11], ['J√≥',1,42], ['G√™nesis',12,50],
  ['√äxodo',1,40], ['Lev√≠tico',1,27], ['N√∫meros',1,36], ['Deuteron√¥mio',1,34],
  ['Josu√©',1,24], ['Ju√≠zes',1,21], ['Rute',1,4],
  ['1 Samuel',1,31], ['2 Samuel',1,24],
  ['Salmos',1,150], ['Prov√©rbios',1,31], ['Eclesiastes',1,12], ['C√¢nticos',1,8],
  ['1 Reis',1,22], ['2 Reis',1,25],
  ['Am√≥s',1,9], ['Os√©ias',1,14], ['Jonas',1,4], ['Miqu√©ias',1,7], ['Naum',1,3], ['Habacuque',1,3], ['Sofonias',1,3],
  ['Isa√≠as',1,66], ['Jeremias',1,52], ['Lamenta√ß√µes',1,5], ['Ezequiel',1,48], ['Daniel',1,12],
  ['1 Cr√¥nicas',1,29], ['2 Cr√¥nicas',1,36], ['Esdras',1,10], ['Neemias',1,13], ['Ester',1,10],
  ['Tiago',1,5], ['G√°latas',1,6], ['1 Tessalonicenses',1,5], ['2 Tessalonicenses',1,3],
  ['1 Cor√≠ntios',1,16], ['2 Cor√≠ntios',1,13], ['Romanos',1,16],
  ['Marcos',1,16], ['Lucas',1,24], ['Atos',1,28],
  ['Ef√©sios',1,6], ['Filipenses',1,4], ['Colossenses',1,4], ['Filemom',1,1],
  ['Hebreus',1,13], ['1 Tim√≥teo',1,6], ['Tito',1,3], ['2 Tim√≥teo',1,4],
  ['1 Pedro',1,5], ['2 Pedro',1,3], ['Judas',1,1],
  ['Mateus',1,28], ['Jo√£o',1,21], ['1 Jo√£o',1,5], ['2 Jo√£o',1,1], ['3 Jo√£o',1,1], ['Apocalipse',1,22]
];
function generateChronoPlan(rate=3, startDateStr){
  const plan = [];
  let curDate = startDateStr ? new Date(startDateStr) : new Date();
  curDate.setHours(0,0,0,0);
  let segIdx = 0; let curBook = CHRONO_SEGMENTS[0][0]; let curStart = CHRONO_SEGMENTS[0][1]; let curEnd = CHRONO_SEGMENTS[0][2];
  function nextDay(){
    const endChapter = Math.min(curStart + rate - 1, curEnd);
    plan.push({ date: curDate.toISOString().slice(0,10), items: [{ book: curBook, start: curStart, end: endChapter }], done: false });
    curStart = endChapter + 1; curDate.setDate(curDate.getDate()+1);
    if(curStart > curEnd){ segIdx++; if(segIdx < CHRONO_SEGMENTS.length){ curBook = CHRONO_SEGMENTS[segIdx][0]; curStart = CHRONO_SEGMENTS[segIdx][1]; curEnd = CHRONO_SEGMENTS[segIdx][2]; } }
  }
  while(segIdx < CHRONO_SEGMENTS.length){ nextDay(); }
  return plan;
}
window.Plan = { generateChronoPlan };
</script>
  <script>
(function(){
  const STORAGE_KEY = 'eds_db_single_v1';
  const qs = (s, el=document) => el.querySelector(s);
  const el = {
    app: qs('#app'), login: qs('#login'), nameInput: qs('#nameInput'), loginBtn: qs('#loginBtn'), logoutBtn: qs('#logoutBtn'),
    bookSelect: qs('#bookSelect'), chaptersInput: qs('#chaptersInput'), reflectionInput: qs('#reflectionInput'), devotionalInput: qs('#devotionalInput'),
    saveEntryBtn: qs('#saveEntryBtn'), clearTodayBtn: qs('#clearTodayBtn'), loadTodayPlanBtn: qs('#loadTodayPlanBtn'),
    entryDate: qs('#entryDate'), todayList: qs('#todayList'), history: qs('#history'),
    bookNotesSelect: qs('#bookNotesSelect'), bookNotes: qs('#bookNotes'), saveBookNotesBtn: qs('#saveBookNotesBtn'), promptList: qs('#promptList'),
    exportBtn: qs('#exportBtn'), importFile: qs('#importFile'), shareLinkBtn: qs('#shareLinkBtn'), streakBadge: qs('#streakBadge'),
    // Bible links
    bibleLinks: qs('#bibleLinks'), openYouVersionBtn: qs('#openYouVersion'), openBibleGatewayBtn: qs('#openBibleGateway'), customBibleUrl: qs('#customBibleUrl'), openCustomBibleBtn: qs('#openCustomBible')
  };

  function saveDB(db){ localStorage.setItem(STORAGE_KEY, JSON.stringify(db)); }
  function loadDB(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || { users:{} }; }catch{ return { users:{} }; } }
  function getUser(db, name){ if(!db.users[name]) db.users[name] = { profile:{ name, createdAt: new Date().toISOString() }, entries:{}, notes:{}, plan:{ type:'cronologico', rate:3, start:null, days:[] } }; return db.users[name]; }

  let db = loadDB(); let currentUser = null;

  function fillBooks(select){ select.innerHTML=''; (window.BIBLE_BOOKS||[]).forEach(b=>{ const o=document.createElement('option'); o.value=b; o.textContent=b; select.appendChild(o); }); }
  function todayISO(){ const d=new Date(); d.setHours(0,0,0,0); return d.toISOString().slice(0,10); }
  function isValidChapters(str){ const re = /^\s*\d+(?:-\d+)?(?:\s*,\s*\d+(?:-\d+)?)*\s*$/; return re.test(str); }
  function findPlanDayByDate(date){ const plan=currentUser?.plan; if(!plan||!plan.days) return null; return plan.days.find(d=>d.date===date)||null; }

  function loadEntry(date){ return currentUser.entries[date] || { items: [], devotional: '' }; }
  function saveEntry(date, entry){ currentUser.entries[date] = entry; saveDB(db); renderToday(); renderHistory(); computeStreak(); }

  function renderToday(){ const date=el.entryDate.value; const e=loadEntry(date); el.devotionalInput.value=e.devotional||''; el.todayList.innerHTML=''; (e.items||[]).forEach((it,idx)=>{ const div=document.createElement('div'); div.className='entry'; div.innerHTML = `<strong>${it.book} ${it.chapters}</strong><br/><small>${(it.reflection||'').replace(/\n/g,'<br/>')}</small>`; const del=document.createElement('button'); del.textContent='Remover'; del.className='ghost'; del.addEventListener('click',()=>{ e.items.splice(idx,1); saveEntry(date,e); }); div.appendChild(document.createElement('br')); div.appendChild(del); el.todayList.appendChild(div); }); el.reflectionInput.value=''; el.chaptersInput.value=''; }

  function renderHistory(){ const dates=Object.keys(currentUser.entries).sort().reverse(); el.history.innerHTML=''; dates.forEach(d=>{ const e=currentUser.entries[d]; const details=document.createElement('details'); const sum=document.createElement('summary'); sum.textContent=`${d} ‚Ä¢ ${e.items?.length||0} leituras`; details.appendChild(sum); const dev=document.createElement('div'); dev.className='entry'; dev.innerHTML = `<strong>Devocional:</strong><br/>${(e.devotional||'').replace(/\n/g,'<br/>')||'<em>(vazio)</em>'}`; details.appendChild(dev); (e.items||[]).forEach(it=>{ const div=document.createElement('div'); div.className='entry'; div.innerHTML = `<strong>${it.book} ${it.chapters}</strong><br/><small>${(it.reflection||'').replace(/\n/g,'<br/>')}</small>`; details.appendChild(div); }); el.history.appendChild(details); }); }

  function renderBookNotes(){ const book=el.bookNotesSelect.value; el.bookNotes.value = currentUser.notes[book] || ''; const prompts=[`Onde vi o car√°ter de Deus em "${book}"?`,`O que este livro revela sobre Jesus e o evangelho?`,`Qual verdade devo obedecer hoje?`,`H√° um pecado a confessar, uma promessa a crer ou um exemplo a seguir?`]; el.promptList.innerHTML=''; prompts.forEach(p=>{ const li=document.createElement('li'); li.textContent=p; el.promptList.appendChild(li); }); }

  function computeStreak(){ const dates=Object.keys(currentUser.entries).sort(); if(dates.length===0){ el.streakBadge.textContent='üî• 0'; return; } let streak=0; let cursor=new Date(); cursor.setHours(0,0,0,0); for(let i=dates.length-1;i>=0;i--){ const d=new Date(dates[i]); d.setHours(0,0,0,0); const diff=Math.round((cursor-d)/(1000*60*60*24)); if(diff===0||diff===1){ streak++; cursor.setDate(cursor.getDate()-1); } else break; } el.streakBadge.textContent=`üî• ${streak}`; }

  function ensurePlan(){ currentUser.plan = currentUser.plan || { type:'cronologico', rate:3, start: todayISO(), days: [] }; return currentUser.plan; }
  function renderPlan(){ const plan=ensurePlan(); el.planStart.value=plan.start||todayISO(); el.planRate.value=plan.rate||3; el.planList.innerHTML=''; if(!plan.days||plan.days.length===0){ const info=document.createElement('div'); info.className='entry'; info.innerHTML='Clique em <strong>Gerar/Regerar</strong> para montar seu plano cronol√≥gico.'; el.planList.appendChild(info); return; } plan.days.forEach((d,i)=>{ const wrap=document.createElement('div'); wrap.className='entry'; const itemsStr=d.items.map(it=>`${it.book} ${it.start}-${it.end}`).join(', '); const cb=document.createElement('input'); cb.type='checkbox'; cb.checked=!!d.done; cb.addEventListener('change',()=>{ plan.days[i].done=cb.checked; saveDB(db); }); const addBtn=document.createElement('button'); addBtn.textContent='Adicionar em "Hoje"'; addBtn.className='ghost'; addBtn.addEventListener('click',()=>{ const date=el.entryDate.value; const e=loadEntry(date); d.items.forEach(it=>e.items.push({ book: it.book, chapters: `${it.start}-${it.end}`, reflection: '' })); saveEntry(date,e); }); wrap.innerHTML=`<strong>Dia ${i+1} (${d.date})</strong><br/><small>${itemsStr}</small>`; wrap.appendChild(document.createElement('br')); wrap.appendChild(cb); wrap.appendChild(document.createTextNode(' Conclu√≠do ')); wrap.appendChild(addBtn); el.planList.appendChild(wrap); }); }

  // Bible link handlers
  function openUrl(u){ try{ window.open(u,'_blank'); }catch(e){ alert('N√£o foi poss√≠vel abrir o link.'); } }
  if(el.openYouVersionBtn){ el.openYouVersionBtn.addEventListener('click',()=> openUrl('https://www.bible.com/pt')); }
  if(el.openBibleGatewayBtn){ el.openBibleGatewayBtn.addEventListener('click',()=> openUrl('https://www.biblegateway.com/versions/')); }
  if(el.openCustomBibleBtn){ el.openCustomBibleBtn.addEventListener('click',()=>{ const u=(el.customBibleUrl.value||'').trim(); if(!u) return alert('Cole um link de B√≠blia.'); openUrl(u); }); }

  // Events
  el.loginBtn.addEventListener('click',()=>{ const name=(el.nameInput.value||'').trim(); if(!name) return alert('Digite seu nome'); db=loadDB(); currentUser=getUser(db,name); saveDB(db); history.replaceState(null,'',location.pathname+`?u=${encodeURIComponent(name)}`); showApp(); });
  el.logoutBtn.addEventListener('click',()=>{ currentUser=null; el.app.classList.add('hidden'); el.login.style.display='flex'; });
  el.saveEntryBtn.addEventListener('click',()=>{ const date=el.entryDate.value; const book=el.bookSelect.value; const chapters=(el.chaptersInput.value||'').trim(); const reflection=(el.reflectionInput.value||'').trim(); const devotional=(el.devotionalInput.value||'').trim(); if(!chapters) return alert('Informe cap√≠tulo(s).'); if(!isValidChapters(chapters)) return alert('Cap√≠tulos inv√°lidos. Use formato: 3, 3-4, 1,3,5-7'); const e=loadEntry(date); e.items=e.items||[]; e.items.push({ book, chapters, reflection }); e.devotional=devotional; saveEntry(date,e); });
  el.clearTodayBtn.addEventListener('click',()=>{ const date=el.entryDate.value; if(!confirm('Limpar leituras e devocional deste dia?')) return; currentUser.entries[date]={ items: [], devotional: '' }; saveDB(db); renderToday(); renderHistory(); });
  el.entryDate.addEventListener('change',renderToday);
  el.loadTodayPlanBtn.addEventListener('click',()=>{ const date=el.entryDate.value; const d=findPlanDayByDate(date); if(!d) return alert('Plano: n√£o h√° item para esta data.'); const e=loadEntry(date); d.items.forEach(it=>e.items.push({ book: it.book, chapters: `${it.start}-${it.end}`, reflection: '' })); saveEntry(date,e); });
  el.saveBookNotesBtn.addEventListener('click',()=>{ const book=el.bookNotesSelect.value; currentUser.notes[book]=el.bookNotes.value; saveDB(db); alert('Reflex√µes do livro salvas!'); });
  el.exportBtn.addEventListener('click',()=>{ const data=JSON.stringify(currentUser,null,2); const blob=new Blob([data],{type:'application/json'}); const a=document.createElement('a'); const dt=new Date().toISOString().slice(0,10); a.href=URL.createObjectURL(blob); a.download=`em-dia-dados-${currentUser.profile.name}-${dt}.json`; a.click(); });
  el.importFile.addEventListener('change',async ev=>{ const file=ev.target.files[0]; if(!file) return; const text=await file.text(); try{ const data=JSON.parse(text); if(!data.profile?.name) throw new Error('Arquivo inv√°lido'); db.users[data.profile.name]=data; saveDB(db); if(currentUser?.profile?.name===data.profile.name){ currentUser=data; } alert('Importado com sucesso!'); renderToday(); renderHistory(); computeStreak(); renderPlan(); }catch(err){ alert('Falha ao importar: '+err.message); } ev.target.value=''; });
  el.shareLinkBtn.addEventListener('click',async()=>{ const url=location.origin+location.pathname+`?u=${encodeURIComponent(currentUser?.profile?.name||'')}`; try{ await navigator.clipboard.writeText(url); alert('Link copiado!\n'+url); }catch{ prompt('Copie o link:',url); } });

  function showApp(){ el.login.style.display='none'; el.app.classList.remove('hidden'); fillBooks(el.bookSelect); fillBooks(el.bookNotesSelect); el.entryDate.value=todayISO(); renderBookNotes(); renderToday(); renderPlan(); renderHistory(); computeStreak(); }
  el.bookNotesSelect.addEventListener('change', renderBookNotes);

  const params = new URLSearchParams(location.search); const u=params.get('u'); if(u){ db=loadDB(); currentUser=getUser(db,u); saveDB(db); showApp(); }
})();
</script>
</body>
</html>
